<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eco-Gesto - Ecossistema de Criaturas Sonoras</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ğŸŒ± Eco-Gesto</h1>
        <p>Ecossistema de Criaturas Sonoras Evolutivas</p>
      </header>

      <div class="main-content">
        <!-- Ãrea de vÃ­deo e detecÃ§Ã£o -->
        <div class="video-section">
          <video id="videoInput" autoplay playsinline></video>
          <canvas id="poseCanvas"></canvas>
        </div>

        <!-- VisualizaÃ§Ã£o do ecossistema -->
        <div class="ecosystem-section">
          <canvas id="ecosystemCanvas"></canvas>
          <div id="creatureInfo" class="info-panel">
            <h3>Criaturas Ativas: <span id="creatureCount">0</span></h3>
            <div id="creaturesList"></div>
          </div>
        </div>
      </div>

      <!-- Controles -->
      <div class="controls">
        <button id="startBtn" class="btn-primary">Iniciar Sistema</button>
        <button id="clearBtn" class="btn-secondary">Limpar Ecossistema</button>
        
        <div class="slider-control">
          <label for="mutationRate"
            >Taxa de MutaÃ§Ã£o: <span id="mutationValue">0.1</span></label
          >
          <input
            type="range"
            id="mutationRate"
            min="0"
            max="1"
            step="0.05"
            value="0.1"
          />
        </div>
        
        <div class="slider-control">
          <label for="maxCreatures"
            >MÃ¡x. Criaturas: <span id="maxCreaturesValue">5</span></label
          >
          <input
            type="range"
            id="maxCreatures"
            min="1"
            max="10"
            step="1"
            value="5"
          />
        </div>

        <!-- ğŸ†• Music.AI Controls -->
        <div class="musicai-controls">
          <h3>ğŸ¼ Music.AI Integration</h3>
          
          <div class="toggle-control">
            <label for="musicAIToggle">
              <input type="checkbox" id="musicAIToggle" />
              Ativar Mixagem Profissional
            </label>
            <span id="musicAIStatus" class="status-idle">Desativado</span>
          </div>

          <div class="slider-control">
            <label for="musicAIInfluence">
              InfluÃªncia: <span id="influenceValue">50%</span>
            </label>
            <input
              type="range"
              id="musicAIInfluence"
              min="0"
              max="1"
              step="0.1"
              value="0.5"
            />
            <small>0% = sÃ³ gene original | 100% = sÃ³ mixagem</small>
          </div>

          <div class="musicai-actions">
            <button id="showHistoryBtn" class="btn-secondary">
              ğŸ“œ HistÃ³rico (<span id="historyCount">0</span>)
            </button>
            <button id="showMetricsBtn" class="btn-secondary">
              ğŸ“Š MÃ©tricas
            </button>
          </div>
        </div>
      </div>

      <!-- Ãrvore genealÃ³gica -->
      <div class="genealogy-section">
        <h3>Ãrvore GenealÃ³gica</h3>
        <canvas id="genealogyCanvas"></canvas>
      </div>

      <!-- InstruÃ§Ãµes -->
      <div class="instructions">
        <h3>Como usar:</h3>
        <ul>
          <li>
            ğŸ–ï¸ <strong>Gesto rÃ¡pido:</strong> Cria criatura com sons agudos e
            rÃ¡pidos
          </li>
          <li>
            âœ‹ <strong>Gesto lento:</strong> Cria criatura com sons graves e
            lentos
          </li>
          <li>
            ğŸ”„ <strong>Gesto circular:</strong> Modula o timbre da criatura
          </li>
          <li>â†•ï¸ <strong>Movimentos verticais:</strong> Controla o pitch</li>
          <li>
            â†”ï¸ <strong>Movimentos horizontais:</strong> Controla o pan
            (esquerda/direita)
          </li>
          <li>
            ğŸ§¬ <strong>Gestos consecutivos:</strong> Cruzam criaturas existentes
            gerando hÃ­bridos
          </li>
        </ul>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js"></script>
    <script type="module" src="js/main.js"></script>
  </body>
</html>
